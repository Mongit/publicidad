<script type="text/javascript" src="./../../../js/datepicker.js"></script>

<div ng-controller="NuevoPublicoController as ctrl" class="container" style="color: {{ctrl.colorText || '#DDD'}}; background-color: {{ctrl.colorBackground || '#23527C'}}">
    <form name="frmNuevo" ng-submit="frmNuevo.$valid && ctrl.save()" role="form" novalidate>
        <h2>Empresa</h2>
                
        <fieldset class="form-group">
            <label for="nombre">* Nombre de la empresa</label>
            <input class="form-control" type="text" ng-model="ctrl.nombre" name="nombre" ng-pattern="/^[A-Za-záéíóú0-9 ]+$/" required ng-minlength="2" ng-maxlength="40"> <!-- class="form-control" -->
            <div class="errorMessages" ng-messages="frmNuevo.nombre.$error" 
                 ng-if="!frmNuevo.nombre.$pristine || frmNuevo.$submitted" role="alert" >
                <div ng-messages-include="/error/messages.html"></div>
            </div>
        </fieldset>
        <br />
        
        <label>Seleccione un color de fondo y otro color de texto para su página :</label>
        <br />
        <div class="row">
            <div class="col-lg-6">
                Fondo
                <label> 
                    <input class="form-control" type="color" ng-model="ctrl.colorBackground"/><small class="text-muted">{{ctrl.colorBackground || " No hay color seleccionado"}}</small>
                </label>
            </div>
            <div class="col-lg-6">
                Texto
                <label>
                    <input class="form-control" type="color" ng-model="ctrl.colorText"/> <small class="text-muted">{{ctrl.colorText || " No hay color seleccionado"}}</small>
                </label>
            </div>
        </div>
        <br />
        <br />
        <br />
        
        <label>Ingresar la dirección URL de las imagenes:<small class="text-muted">Abra una imagen que este en internet, de click derecho sobre la imágen, copie la dirección URL y péguela en este campo. la dirección URL, tiene este formato: https://upload.wikimedia.org/wikipedia/commons/f/fc/Flag_of_Mexico.svg</small> </label>
        <br />
        <div class="row">
            <div class="col-lg-6">
                Logotipo <small class="text-muted">(Fondo transparente)</small>
                <br/>
                <label> 
                    <input class="form-control" type="text" ng-model="ctrl.logotipo" name="logotipo" style="align: left;"/>
                    <div>
                        <img src="{{ctrl.logotipo}}" width="50%" height="50%" alt="No file selected" />
                    </div>
                    <a href ng-click="ctrl.quitarLogo()" role="button">Quitar logo</a>
                </label>
            </div>
            <div class="col-lg-6">
                Foto
                <br />
                <label>
                    <input class="form-control" type="text" ng-model="ctrl.foto" name="foto"/>
                    <div>
                        <img src="{{ctrl.foto}}" width="50%" height="50%" alt="No file selected">
                    </div>
                    <a href ng-click="ctrl.quitarFoto()" role="button">Quitar foto</a>                        
                </label>
            </div>
        </div>
        <br/>
        <br/>
            
        <fieldset class="form-group">
            <label>Texto introductorio ó bienvenida de su página:</label>
            <textarea class="form-control" rows="4" cols="50" ng-model="ctrl.textoIntro" ng-maxlength="360" name="textoIntro"></textarea>
            <div class="errorMessages" ng-messages="frmNuevo.textoIntro.$error" 
             ng-if="!frmNuevo.textoIntro.$pristine || frmNuevo.$submitted"
             role="alert">
                <div ng-messages-include="/error/messages.html"></div>
            </div>
        </fieldset>   
        <br />
        <br />
        
        
        <div class="row">
            <h3>Dirección</h3>        
            <div class="col-md-6" id="dir">
                
                <label>Número</label>
                <input class="form-control" type="text" ng-model="ctrl.numero" ng-maxlength="5" name="numero"> <div class="errorMessages" ng-messages="frmNuevo.numero.$error" 
                     ng-if="!frmNuevo.numero.$pristine || frmNuevo.$submitted" role="alert">
                    <div ng-messages-include="/error/messages.html"></div>
                </div>
                
                <label>Número interior</label>
                <input class="form-control" type="text" ng-model="ctrl.numeroInt" ng-maxlength="5" name="numeroInt"> 
                <div class="errorMessages" ng-messages="frmNuevo.numeroInt.$error" 
                     ng-if="!frmNuevo.numeroInt.$pristine || frmNuevo.$submitted" role="alert">
                    <div ng-messages-include="/error/messages.html"></div>
                </div>
                
                <label>* Calle</label>
                <input class="form-control" type="text"ng-model="ctrl.calle" name="calle" ng-maxlength="40" required> 
                <div class="errorMessages" ng-messages="frmNuevo.calle.$error" 
                     ng-if="!frmNuevo.calle.$pristine || frmNuevo.$submitted" role="alert">
                    <div ng-messages-include="/error/messages.html"></div>
                </div>
                
                <label>* Colonia</label>
                <input class="form-control" type="text" ng-model="ctrl.colonia" name="colonia" ng-pattern="/^[a-zA-Záéíóú ]+$/" ng-maxlength="30" required> 
                <div class="errorMessages" ng-messages="frmNuevo.colonia.$error" 
                     ng-if="!frmNuevo.colonia.$pristine || frmNuevo.$submitted" role="alert">
                    <div ng-messages-include="/error/messages.html"></div>
                </div>
                
                <label>* C.P.</label>
                <input class="form-control" type="text" ng-model="ctrl.cp" name="cp" ng-pattern="/^[0-9]+$/" ng-minlength="5" ng-maxlength="5" required> 
                <div class="errorMessages" ng-messages="frmNuevo.cp.$error" 
                     ng-if="!frmNuevo.cp.$pristine || frmNuevo.$submitted" role="alert">
                    <div ng-messages-include="/error/messages.html"></div>
                </div>
                
                <label>* Municipio</label>
                <input class="form-control" type="text" ng-model="ctrl.municipio" name="municipio" ng-pattern="/^[a-zA-Záéíóú ]+$/" ng-maxlength="20" ng-minlength="5" required/>
                <div class="errorMessages" ng-messages="frmNuevo.municipio.$error" 
                     ng-if="!frmNuevo.municipio.$pristine || frmNuevo.$submitted" role="alert">
                    <div ng-messages-include="/error/messages.html"></div>
                </div>
                
                <label>* Estado</label>
                <input class="form-control" type="text" ng-model="ctrl.estado" ng-minlength="5" ng-maxlength="20" ng-pattern="/^[a-zA-Záéíóú ]+$/" name="estado" required/>
                <div class="errorMessages" ng-messages="frmNuevo.estado.$error" 
                     ng-if="!frmNuevo.estado.$pristine || frmNuevo.$submitted" role="alert">
                    <div ng-messages-include="/error/messages.html"></div>
                </div>
            
            </div>
            <div class="col-md-6" id="dir">
                
                <label>Mapa: </label>
                <div id="googleMap" style="width:500px;height:380px;"></div>
                <br />
                <a href ng-click="ctrl.borrarMarker()" role="button" class="btn btn-default">Borrar marcador</a>
            
            </div>
        </div>
        <br />
        <br />
        
        <fieldset>
            <h3>Rubro</h3>
            <label>* Rubro de la empresa:</label>
            <input class="form-control" ng-model="ctrl.rubro" ng-maxlength="40" ng-minlength="5" ng-pattern="/^[a-zA-Záéíóú ]+$/"  name="rubro" required/>            
            <div class="errorMessages" ng-messages="frmNuevo.rubro.$error" 
                 ng-if="!frmNuevo.rubro.$pristine || frmNuevo.$submitted" role="alert">
                <div ng-messages-include="/error/messages.html"></div>
            </div>
        </fieldset>
        <br />
        <br />
        
       
        
        <fieldset class="form-group">
            <label>Descripción</label> <small class="text-muted">(Aparece junto al nombre de su negocio en nuestro listado de empresas).</small>
            <textarea class="form-control" rows="4" cols="50" ng-model="ctrl.descripcion" name="descripcion" ng-maxlength="180"></textarea>
            <div class="errorMessages" ng-messages="frmNuevo.descripcion.$error" 
             ng-if="!frmNuevo.descripcion.$pristine || frmNuevo.$submitted" role="alert">
                <div ng-messages-include="/error/messages.html"></div>
            </div>
            
            <label>* Horario de atención:</label>
            <input class="form-control" type="text" ng-model="ctrl.horario" name="horario" ng-maxlength="100" required/>      
            <div class="errorMessages" ng-messages="frmNuevo.horario.$error" 
                 ng-if="!frmNuevo.horario.$pristine || frmNuevo.$submitted" role="alert">
                <div ng-messages-include="/error/messages.html"></div>
            </div>
            
            <label>* Encargado</label><small class="text-muted">(Contesta las dudas del cliente).</small>
            <input class="form-control" type="text" ng-model="ctrl.encargado" name="encargado" ng-pattern="/^[a-zA-Záéíóú ]+$/" ng-maxlength="40" ng-minlength="10" required/>      
            <div class="errorMessages" ng-messages="frmNuevo.encargado.$error" 
             ng-if="!frmNuevo.encargado.$pristine || frmNuevo.$submitted" role="alert">
                <div ng-messages-include="/error/messages.html"></div>
            </div>
            
            <label>* Teléfono de la empresa</label>
            <input class="form-control" type="text" ng-model="ctrl.tel" name="tel" ng-minlength="5" ng-maxlength="15" ng-pattern="/^[0-9]+$/" required/>
            <div class="errorMessages" ng-messages="frmNuevo.tel.$error" 
                 ng-if="!frmNuevo.tel.$pristine || frmNuevo.$submitted" role="alert">
                <div ng-messages-include="/error/messages.html"></div>
            </div>
            
            <label>* Email</label>
            <input class="form-control" type="email" ng-model="ctrl.email" name="email" ng-pattern="/^[-!#$%&'*+/0-9=?A-Z^_a-z{|}~](\.?[-!#$%&'*+/0-9=?A-Z^_a-z{|}~])*@[a-zA-Z](-?[a-zA-Z0-9])*(\.[a-zA-Z](-?[a-zA-Z0-9])*)+$/" required/>   
            <div class="errorMessages" ng-messages="frmNuevo.email.$error" 
                 ng-if="!frmNuevo.email.$pristine || frmNuevo.$submitted" role="alert">
                <div ng-messages-include="/error/messages.html"></div>
            </div>
            <br />
            <br />
            
            
            <h4>Agregue algunos links a sus redes sociales</h4>
            <label>Whatsapp</label>
            <input class="form-control" type="text" ng-model="ctrl.whats" name="whats"/>
            
            <label>Facebook ("https://www.facebook.com/") :<small class="text-muted">sólo agregue la parte del URL que falta, ejemplo: paginasweburuapan</small></label>
            <input class="form-control" type="text" ng-model="ctrl.face" ng-maxlength="20" name="face"/>
            
            <label>Flickr ("http://flickr.com/") :<small class="text-muted">sólo agregue la parte del URL que falta, ejemplo: confeccionescolombia</small></label>
            <input class="form-control" type="text" ng-model="ctrl.flickr" name="flickr"/>
            
            <label>Link1 :<small class="text-muted">escriba la dirección completa (URL), ejemplo: http://weburuapan.com/</small></label>
            <input class="form-control" type="text" ng-model="ctrl.link1" name="link1"/>
        
            <label>Link2 :</label>
            <input class="form-control" type="text" ng-model="ctrl.link2" name="link2"/>
                    
        </fieldset>
        <br />
        <br />
        
        
        <fieldset>
            <h3>Productos</h3>
            <div class="row">
                <div class="col-md-6">
                    
                    <small class="text-muted">Llene los datos de un producto y presione el botón "Agregar producto", usted puede agregar máximo 10 productos o servicios a su página web.</small>
                    <br />
                    <label>Título del producto</label>
                    <input class="form-control" type="text" ng-model="ctrl.producto.titulo" ng-maxlength="80" name="titulo"/>
                    <div class="errorMessages" ng-messages="frmEditar.titulo.$error" 
                         ng-if="!frmEditar.titulo.$pristine || frmEditar.$submitted" role="alert">
                        <div ng-messages-include="/error/messages.html"></div>
                    </div>
                    
                    <label>Descripción del producto</label>
                    <textarea class="form-control" rows="4" cols="50" ng-model="ctrl.producto.parrafo" ng-maxlength="160" name="parrafo"></textarea>
                    <div class="errorMessages" ng-messages="frmEditar.parrafo.$error" 
                         ng-if="!frmEditar.parrafo.$pristine || frmEditar.$submitted" role="alert">
                        <div ng-messages-include="/error/messages.html"></div>
                    </div>
                    
                    <label>Foto del producto</label><small class="text-muted">(Dirección URL).</small>
                    <input class="form-control" type="text" ng-model="ctrl.producto.foto" name="foto"/>
                    <div>
                        <img src="{{ctrl.producto.foto}}" width="30%" height="30%" alt="No file selected">
                    </div>
                    
                    <a href ng-click="ctrl.agregarProducto()" type="button" class="btn btn-success btn-sm">Agregar producto</a>
                    
                </div>
                <div class="col-md-6">
                    
                    Productos Agregados: 
                    <ol class="list-group">
                        <li ng-repeat="producto in ctrl.productos" class="list-group-item">
                            <strong>{{$index + 1}}. {{producto.titulo}}</strong> {{producto.parrafo}} 
                            <img src="{{producto.foto}}" width="20%" height="20%"  class="foto" ng-show="producto.foto" class="label label-default label-pill pull-xs-right">
                        </li>
                    </ol>
                    
                    
                    <label>Número del producto a remover:</label>
                    <input class="form-control" type="text" ng-model="ctrl.remover"/>
                    <br />
                    <a href ng-click="ctrl.removerProducto()" type="button" class="btn btn-danger btn-sm">Remover producto</a>
                    <a href ng-click="ctrl.borrarProductos()" type="button" class="btn btn-danger btn-sm">Borrar todos los productos</a>
                    
                </div>
            </div>
        </fieldset>
        <br />
        <br />
        
        
        <label>Nota adicional ó comentario</label>
        <textarea class="form-control" rows="4" cols="50" ng-model="ctrl.nota" ng-maxlength="180" name="nota"></textarea>
        <div class="errorMessages" ng-messages="frmNuevo.nota.$error" 
             ng-if="!frmNuevo.nota.$pristine || frmNuevo.$submitted" role="alert">
            <div ng-messages-include="/error/messages.html"></div>
        </div>
        <br />
        <br />
        
        <button type="submit" class="btn btn-success btn-lg">Guardar mi página</button>
    </form>
</div>
